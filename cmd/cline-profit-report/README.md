# 出荷粗利・実績レポート

このプログラムは売上テーブルと原価テーブルから出荷に関する粗利と実績を計算して表示します。

## 機能

- 出荷科目（shipment）の売上と原価データを分析
- 日付、会社、倉庫別の粗利計算
- 粗利率の算出
- 売上・原価数量の比較
- 期間全体のサマリー表示
- 日別平均値の表示

## 前提条件

- Go 1.21以上がインストールされていること
- MySQLデータベースが起動していること
- 売上・原価テーブルにデータが存在すること

## 使用方法

### 1. 依存関係のダウンロード

```bash
make deps
```

### 2. プログラムの実行

```bash
make run
```

## 表示内容

### メインレポート
- **日付**: 対象日
- **会社名**: 会社名
- **倉庫**: 倉庫名
- **売上金額**: 出荷売上の総額（円）
- **原価金額**: 出荷原価の総額（円）
- **粗利**: 売上金額 - 原価金額
- **粗利率**: (粗利 ÷ 売上金額) × 100
- **売上数量**: 売上の総数量
- **原価数量**: 原価の総数量

### サマリー
- 対象日数
- 総売上金額・総原価金額・総粗利
- 平均粗利率
- 総売上数量・総原価数量

### 日別平均
- 平均日売上・平均日原価・平均日粗利
- 平均日売上数量・平均日原価数量

## 出力例

```
=== 出荷粗利・実績レポート ===

日付         会社名           倉庫        売上金額      原価金額          粗利   粗利率%   売上数量   原価数量
------------------------------------------------------------------------------------------------------------------------
2025-01-19   BB団             A倉庫          ¥15,234        ¥8,456        ¥6,778     44.5%       87       89
2025-01-19   BB団             B倉庫          ¥12,890        ¥7,123        ¥5,767     44.7%       65       71
...

=== サマリー ===
対象日数: 7日
総売上金額: ¥234,567
総原価金額: ¥123,456
総粗利: ¥111,111
平均粗利率: 47.4%
総売上数量: 1,250
総原価数量: 1,298

=== 日別平均 ===
平均日売上: ¥33,509
平均日原価: ¥17,637
平均日粗利: ¥15,873
平均日売上数量: 179
平均日原価数量: 185
```

## データベース接続設定

現在の設定：
```
Host: mysql.local:3306
User: root
Password: mypass
Database: test
```

接続設定を変更する場合は、`main.go`の以下の行を編集してください：
```go
db, err := sql.Open("mysql", "root:mypass@(mysql.local:3306)/test?parseTime=true")
```

## クリーンアップ

```bash
make clean
```

## 注意事項

- このレポートは出荷科目（shipment）のデータのみを対象とします
- 売上データまたは原価データが存在しない場合、該当項目は0として表示されます
- 粗利率は売上金額が0の場合、"N/A"と表示されます
