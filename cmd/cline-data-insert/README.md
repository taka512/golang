# データ挿入プログラム

このプログラムは売上テーブル（sales_daily_reports / sales_daily_report_items）と原価テーブル（cost_daily_reports / cost_daily_report_items）に1週間分のサンプルデータを挿入します。

## 前提条件

- Go 1.21以上がインストールされていること
- MySQLデータベースが起動していること
- 必要なマイグレーションが実行済みであること

## 使用方法

### 1. 依存関係のダウンロード

```bash
make deps
```

または

```bash
go mod tidy
go mod download
```

### 2. プログラムのビルドと実行

```bash
make run
```

または

```bash
make build
./bin/data-insert
```

## 挿入されるデータ

### 対象期間
- 実行日から7日前まで（1週間分）

### データ組み合わせ
- 会社 × 倉庫 × 科目 × 日付の全組み合わせ
- 7日 × 3社 × 2倉庫 × 3科目 = 126レコード（売上・原価それぞれ）

### 明細データ
- 各レポートに対して2-4個のアイテム
- サイズ：S, M, L, XL
- 数量：10-109個（ランダム）
- 売上単価：10.00-59.99円
- 原価単価：5.00-34.99円（売上より安く設定）

## データベース接続設定

現在の設定：
```
Host: mysql.local:3306
User: root
Password: mypass
Database: test
```

接続設定を変更する場合は、`main.go`の以下の行を編集してください：
```go
db, err := sql.Open("mysql", "root:mypass@(mysql.local:3306)/test?parseTime=true")
```

## 実行結果例

```
=== データ挿入開始 ===
対象期間: 2025-01-13 ～ 2025-01-19
会社数: 3, 倉庫数: 2, 売上科目数: 3, 原価科目数: 3
売上データ挿入完了: 126件のレポート
原価データ挿入完了: 126件のレポート
=== データ挿入完了 ===
```

## エラー対処

- データベース接続エラー：接続情報とMySQLサーバーの状態を確認
- テーブル存在エラー：マイグレーションが正しく実行されているか確認
- 重複エラー：同じ期間のデータが既に存在する場合は、先にデータを削除してから実行

## クリーンアップ

ビルドファイルを削除：
```bash
make clean
